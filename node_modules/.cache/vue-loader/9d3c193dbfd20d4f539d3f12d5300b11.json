{"remainingRequest":"C:\\vueproject\\mydapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\vueproject\\mydapp\\node_modules\\vue-metamask\\src\\VueMetamask.vue?vue&type=style&index=0&id=7b7987c8&scoped=true&lang=css&","dependencies":[{"path":"C:\\vueproject\\mydapp\\node_modules\\vue-metamask\\src\\VueMetamask.vue","mtime":499162500000},{"path":"C:\\vueproject\\mydapp\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\vueproject\\mydapp\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\vueproject\\mydapp\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\vueproject\\mydapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\vueproject\\mydapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KI3Z1ZS1tZXRhbWFzayB7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgdG9wOiAwOw0KICBsZWZ0OiAwOw0KICB3aWR0aDogMDsNCiAgaGVpZ2h0OiAwOw0KfQ0K"},{"version":3,"sources":["VueMetamask.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VueMetamask.vue","sourceRoot":"node_modules/vue-metamask/src","sourcesContent":["<script>\r\nimport Web3 from \"web3\";\r\nexport default {\r\n  props: {\r\n    userMessage: {\r\n      type: String,\r\n      default: \"null\",\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      web3: null,\r\n      MetaMaskId: \"1\", // main net netID\r\n      netID: \"1\", // user metamask id\r\n      MetaMaskAddress: \"\", // user Address\r\n      Web3Interval: null,\r\n      AccountInterval: null,\r\n      NetworkInterval: null,\r\n      stateLog: null,\r\n      isComplete: false,\r\n      type: \"INIT\",\r\n      MetamaskMsg: {\r\n        LOAD_MATAMASK_WALLET_ERROR: \"Loading metamask error, please try later\",\r\n        EMPTY_METAMASK_ACCOUNT:\r\n          \"Please log in to your metamask to continue with this app.\",\r\n        NETWORK_ERROR: \"The connection is abnormal, please try again\",\r\n        METAMASK_NOT_INSTALL: \"Please install metamask for this application\",\r\n        METAMASK_TEST_NET: \"Currently not in the main network.\",\r\n        METAMASK_MAIN_NET: \"Currently Main network\",\r\n        USER_DENIED_ACCOUNT_AUTHORIZATION: \"User denied account authorization\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    checkWeb3() {\r\n      let web3 = window.web3;\r\n      if (typeof web3 === \"undefined\") {\r\n        this.web3 = null;\r\n        this.Log(this.MetamaskMsg.METAMASK_NOT_INSTALL, \"NO_INSTALL_METAMASK\");\r\n      }\r\n    },\r\n    checkAccounts() {\r\n      if (this.web3 === null) return;\r\n      this.web3.eth.getAccounts((err, accounts) => {\r\n        console.log();\r\n\r\n        if (err != null)\r\n          return this.Log(this.MetamaskMsg.NETWORK_ERROR, \"NETWORK_ERROR\");\r\n        if (accounts.length === 0) {\r\n          this.MetaMaskAddress = \"\";\r\n          this.Log(this.MetamaskMsg.EMPTY_METAMASK_ACCOUNT, \"NO_LOGIN\");\r\n          return;\r\n        }\r\n        this.MetaMaskAddress = accounts[0]; // user Address\r\n      });\r\n    },\r\n    checkNetWork() {\r\n      this.web3.version.getNetwork((err, netID) => {\r\n        // Main Network: 1\r\n        // Ropsten Test Network: 3\r\n        // Kovan Test Network: 42\r\n        // Rinkeby Test Network: 4\r\n        if (err != null)\r\n          return this.Log(this.MetamaskMsg.NETWORK_ERROR, \"NETWORK_ERROR\");\r\n        this.netID = netID; //User MetaMask's current status\r\n        if (this.MetaMaskAddress !== \"\" && netID === \"1\")\r\n          return this.Log(this.MetamaskMsg.METAMASK_TEST_NET, \"MAINNET\");\r\n        if (this.MetaMaskAddress !== \"\" && netID === \"3\")\r\n          return this.Log(this.MetamaskMsg.METAMASK_TEST_NET, \"ROPSTEN\");\r\n        if (this.MetaMaskAddress !== \"\" && netID === \"42\")\r\n          return this.Log(this.MetamaskMsg.METAMASK_TEST_NET, \"LOVAN\");\r\n        if (this.MetaMaskAddress !== \"\" && netID === \"4\")\r\n          return this.Log(this.MetamaskMsg.METAMASK_TEST_NET, \"RINKEBY\");\r\n        if (this.MetaMaskAddress !== \"\")\r\n          this.Log(this.MetamaskMsg.METAMASK_MAIN_NET, \"MAINNET\");\r\n      });\r\n    },\r\n    Log(msg, type = \"\") {\r\n      const letType = type;\r\n      if (letType === this.type) return;\r\n      const message = this.userMessage === \"null\" ? msg : this.userMessage;\r\n      this.type = type;\r\n      this.$emit(\"onComplete\", {\r\n        web3: this.web3,\r\n        type,\r\n        metaMaskAddress: this.MetaMaskAddress,\r\n        message,\r\n        netID: this.netID,\r\n      });\r\n    },\r\n    web3TimerCheck(web3) {\r\n      this.web3 = web3;\r\n      this.checkAccounts();\r\n      this.checkNetWork();\r\n      this.Web3Interval = setInterval(() => this.checkWeb3(), 1000);\r\n      this.AccountInterval = setInterval(() => this.checkAccounts(), 1000);\r\n      this.NetworkInterval = setInterval(() => this.checkNetWork(), 1000);\r\n    },\r\n  },\r\n  async mounted() {\r\n    if (window.ethereum) {\r\n      window.web3 = new Web3(ethereum);\r\n      try {\r\n        await ethereum.enable();\r\n        this.web3TimerCheck(window.web3);\r\n      } catch (error) {\r\n        this.Log(\r\n          this.MetamaskMsg.USER_DENIED_ACCOUNT_AUTHORIZATION,\r\n          \"USER_DENIED_ACCOUNT_AUTHORIZATION\"\r\n        );\r\n      }\r\n    } else if (window.web3) {\r\n      window.web3 = new Web3(web3.currentProvider);\r\n      this.web3TimerCheck(window.web3);\r\n    } else {\r\n      this.web3 = null;\r\n      this.Log(this.MetamaskMsg.METAMASK_NOT_INSTALL, \"NO_INSTALL_METAMASK\");\r\n      console.error(\r\n        \"Non-Ethereum browser detected. You should consider trying MetaMask!\"\r\n      );\r\n    }\r\n  },\r\n};\r\n</script>\r\n<template>\r\n  <div id=\"vue-metamask\"></div>\r\n</template>\r\n<style scoped>\r\n#vue-metamask {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n</style>\r\n"]}]}
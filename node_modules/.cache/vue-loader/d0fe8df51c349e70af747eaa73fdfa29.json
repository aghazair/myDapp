{"remainingRequest":"C:\\vueproject\\mydapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\vueproject\\mydapp\\src\\App.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\vueproject\\mydapp\\src\\App.vue","mtime":1633972228624},{"path":"C:\\vueproject\\mydapp\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\vueproject\\mydapp\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\vueproject\\mydapp\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\vueproject\\mydapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\vueproject\\mydapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojYXBwIHsKICBmb250LWZhbWlseTogQXZlbmlyLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmOwogIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGNvbG9yOiAjMmMzZTUwOwogIAp9CgoKLmhpZGV7CiAgZGlzcGxheTogbm9uZTsKCn0K"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2SA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <header>\n    <div class=\"d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom\">\n      \n        <span class=\"fs-4\">Learn Token</span>\n      \n\n     <nav class=\"d-inline-flex mt-2 mt-md-0 ms-md-auto\">\n         <div class=\"c_topbar\">\n        <button id=\"btn\" class=\"w-100 btn btn-lg btn-primary\" @click=\"connect\" type=\"button\">Connect</button>\n        <div id='address'></div>\n\n        </div>\n      </nav>\n      <div></div>\n    </div>\n    <div id=\"warning\" class=\"alert alert-danger hide\" role=\"alert\"></div>\n    <div id=\"info\" class=\"alert alert-info hide\" role=\"alert\"></div>\n    </header>\n    <div class=\"container py-3\">\n    <header>\n      <div class=\"pricing-header p-3 pb-md-4 mx-auto text-center\">\n        <h1 class=\"display-4 fw-normal\">My First DAPP</h1>\n      </div>\n    </header>\n\n    <main>\n    <section class=\"py-5 text-center container\">\n        <div class=\"row py-lg-5\">\n          <div class=\"col-lg-6 col-md-8 mx-auto\">\n            <h1 class=\"fw-light\">Stake Details</h1>\n            <p class=\"lead text-muted\" id=\"detail\"></p>\n            \n          </div>\n        </div>\n      </section>\n\n      <div class=\"row row-cols-1 row-cols-md-3 mb-3 text-center\">\n        <div class=\"col\">\n          <div class=\"card mb-4 rounded-3 shadow-sm\">\n            <div class=\"card-header py-3\">\n              <h4 class=\"my-0 fw-normal\">Beginner</h4>\n            </div>\n            <div class=\"card-body\">\n              <h1 class=\"card-title pricing-card-title\">5000<small class=\"text-muted fw-light\">LRN</small></h1>\n              <ul class=\"list-unstyled mt-3 mb-4\">\n                <li>Feature 1</li>\n                <li>Feature 2</li>\n                \n              </ul>\n              <button type=\"button\" class=\"w-100 btn btn-lg btn-outline-primary\" @click=\"bignner\">Unlock</button>\n            </div>\n          </div>\n        </div>\n        <div class=\"col\">\n          <div class=\"card mb-4 rounded-3 shadow-sm\">\n            <div class=\"card-header py-3\">\n              <h4 class=\"my-0 fw-normal\">Professional</h4>\n            </div>\n            <div class=\"card-body\">\n              <h1 class=\"card-title pricing-card-title\">10000<small class=\"text-muted fw-light\">LRN</small></h1>\n              <ul class=\"list-unstyled mt-3 mb-4\">\n                <li>Feature 1</li>\n                <li>Feature 2</li>\n                <li>Feature 3</li>\n                \n                \n              </ul>\n              <button type=\"button\" class=\"w-100 btn btn-lg btn-primary\" @click=\"professional\">Unlock</button>\n            </div>\n          </div>\n        </div>\n        <div class=\"col\">\n          <div class=\"card mb-4 rounded-3 shadow-sm border-primary\">\n            <div class=\"card-header py-3 text-white bg-primary border-primary\">\n              <h4 class=\"my-0 fw-normal\">Expert</h4>\n            </div>\n            <div class=\"card-body\">\n              <h1 class=\"card-title pricing-card-title\">25000<small class=\"text-muted fw-light\">LRN</small></h1>\n              <ul class=\"list-unstyled mt-3 mb-4\">\n                <li>Feature 1</li>\n                <li>Feature 2</li>\n                <li>Feature 3</li>\n                <li>Feature 4</li>\n              </ul>\n              <button type=\"button\" class=\"w-100 btn btn-lg btn-primary\" @click=\"expert\">Unlock</button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      \n      </main>\n\n    </div>\n    \n  </div>\n</template>\n\n\n<script>\n/* eslint-disable */\n// import Topbar from './components/topbar.vue';\n//import Menu from './components/menu.vue';\nimport Web3 from 'web3';\nimport ABI from './contracts/learnstakecontract'\nconst contractAddress = '0x0E600bC9850dc8C5b915F42988f6eBCBfd475fB3';\nconst web3 = new Web3(window.web3.currentProvider);\nconst myContract =  new web3.eth.Contract(ABI, contractAddress);\n\n//check if account is changed in metamask\nwindow.ethereum.on('accountsChanged', function (accounts) {\n  getAccount();\n\n});\n\nexport default {\n  name: 'App',\n\n  components: {\n   \n  },\n  data(){\n            return {\n                msg: \"My First DAPP\"\n            }\n        },\n  methods:{\n\n          bignner(){\n            unLockMembershp(5000, \"Bigenner\");\n          },\n          professional(){\n            unLockMembershp(10000,\"Professional\");\n          },\n          expert(){\n            unLockMembershp(25000,\"Expert\");\n          },\n          withdraw(){\n              alert('withdraw');\n          },\n          connect(){\n                try{\n                         \n                    if(document.getElementById(\"btn\").innerText == \"Connected\")\n                    {\n                        alert(\"Already Connected\");\n                        return;\n                    }\n                    getAccount();\n \n                }\n                catch(error){\n                    // if user cancels metamask request \n                    if (error.code === 4001){\n                        console.log('Metamask Connection Cancelled');\n                    }\n                    else {\n                        console.log(error);\n                        // if unable to requst account prompt to install metamask\n                        alert('Install Metamask to Connect');\n                    }\n                }\n            }\n\n      }\n}\n// withdraw  stakes\nasync function withdraw(amount)\n{\n  \n  const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n  const account = accounts[0];\n  await myContract.methods.withdrawStake(amount).send({from:account});\n  getAccountDetail(account);\n\n}\n\n// get account detail\nasync function getAccountDetail(myAddress)\n{\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    \n      if(accounts[0] != myAddress)\n      {\n        console.log(\"ERROR: connect metamask again!\");\n      }\n\n      const hasStakes = await myContract.methods.hasStake(myAddress).call(); \n      \n      const tokenName = await myContract.methods.name().call();\n      const accBalance = await myContract.methods.balanceOf(myAddress).call();\n\n      var membershipType = \"Not a Member\"; \n    \n        if(hasStakes >=5000 && hasStakes < 10000)\n        {\n            membershipType = \"Beginner\";\n        }\n        else if(hasStakes >= 10000 && hasStakes < 25000)\n        {\n            membershipType = \"Professional\";\n        }\n        else if(hasStakes >= 25000)\n        {\n          membershipType = \"Expert\";\n        }\n  \n      document.getElementById(\"detail\").innerHTML = \"Token Name : \"+ tokenName +\"<br/> Current Stakes: \" + hasStakes +\"<br /> Current Membership Type: \" + membershipType;\n      document.getElementById(\"detail\").innerHTML += \"<br/> Account Balnce: \"+web3.utils.fromWei(accBalance, 'ether') ;\n      document.getElementById(\"detail\").innerHTML += \"<button id=\\\"withdraw\\\" type=\\\"button\\\" class=\\\"w-100 btn btn-lg btn-primary\\\" >Withdraw Stakes</button>\";\n      document.getElementById(\"withdraw\").addEventListener(\"click\", function(){withdraw(hasStakes)},false);\n      \n\n\n}\n\n// get account info\n  async function getAccount() {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    const account = accounts[0];\n    document.getElementById(\"btn\").innerText = \"Connected\";\n    document.getElementById(\"address\").innerHTML = \"Account Connected : \"+account;\n    getAccountDetail(account);\n    \n    }\n\n// unlock membership based on type \n async function unLockMembershp(amount, memberType) \n {\n   if(document.getElementById(\"btn\").innerText == \"Connect\")\n    {\n      document.getElementById(\"warning\").innerHTML = \"First connect with MetaMask using <b>Connect</b> Button!\";\n      document.getElementById(\"warning\").style.display = \"block\";\n    }\n    else\n    {\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n      const account = accounts[0];\n      \n      var balance = await myContract.methods.balanceOf(account).call();\n      var _balance = web3.utils.fromWei(balance, 'ether');\n\n      if(_balance < amount)\n      {\n        var reqAmount =  amount-_balance ;\n\n        document.getElementById(\"warning\").innerHTML = \"Insufficient Balance for \"+memberType+\" Membership, buy \"+reqAmount+\"  LRN Tokens!\";\n        document.getElementById(\"warning\").style.display = \"block\";\n        \n      }\n      else // Stake \n      {\n         const hasStakes = await myContract.methods.hasStake(account).call(); \n\n         //check if already staked.\n        if(hasStakes > 0)\n        {\n           document.getElementById(\"info\").innerHTML = \"Already staked \"+hasStakes +\" Tokens!\";\n          document.getElementById(\"info\").style.display = \"block\";\n        }\n        else // if not already staked\n        {\n          console.log(myContract);\n           var msgSender = await myContract.methods.getSender().call();\n           console.log(\"message sender :\"+msgSender);\n           var msgSenderBalance = await myContract.methods.getSenderBalance().call();\n           console.log(\"message sender balance\");\n\n          console.log(amount);\n          try{\n             \n              var staked = await myContract.methods.stake(amount).send({from:account});\n              document.getElementById(\"info\").innerHTML = \"Membership Unlocked Successfully!\";\n              document.getElementById(\"info\").style.display = \"block\";\n          }\n          catch(e)\n          {\n              console.log(e);\n          }\n          console.log(web3.utils.toWei(amount.toString(),'ether'));\n        }\n\n      } \n      \n      getAccountDetail(account);\n \n    }\n  \n  //  return learnContract;\n}\n\n\n\n/* eslint-enable */\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  \n}\n\n\n.hide{\n  display: none;\n\n}\n</style>\n"]}]}